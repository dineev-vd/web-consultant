{
  "version": "3.4",
  "networks": [
    "main"
  ],
  "services": {
    "proxy":{
      "image" : "nginx",
      "ports": [
        "8080:80"
      ],
      "volumes":[
        "./proxy/nginx.conf:/etc/nginx/nginx.conf"
      ]
    },
    "db": {
      "env_file": "./development.env",
      "image": "postgres",
      "networks": {
        "db": {
          "aliases": ["webrtc-db"]
        }
      },
      "ports": [
        "5432:5432"
      ],
      "restart": "always"
    },
    "server": {
      "build": {
        "dockerfile": "./Dockerfile.server",
        "context": "."
      },
      "env_file": "./development.env",
      "networks": [
        "db"
      ],
      "ports": [
        "8080:8080",
        "8081:8081"
      ],
      "restart": "always"
    },
    "client": {
      "build": {
        "dockerfile": "./Dockerfile.client",
        "context": "."
      },
      "env_file": "./development.env",
      "ports": [
        "8090:8080"
      ],
      "restart": "always"
    }
  }
}
